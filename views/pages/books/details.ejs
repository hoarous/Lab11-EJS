<section></section>// Display details for selected saved book
function showDetails(request, response) {
  let SQL = 'SELECT * FROM books WHERE id=$1;';
  let values = [request.params.book_id];
  return client.query(SQL, values)
    .then((details) => {
      client.query('SELECT DISTINCT bookshelf FROM books;')
        .then((bookshelves) => {
          response.render('pages/books/details', {book: details.rows[0], bookshelves: bookshelves.rows})})
    })
    .catch(err => handleError(err, response));
}

// Edit details of a book in your library from the Details page
function editDetails(request, response) {
  let {title, author, image_url, description, isbn, bookshelf} = request.body;
  let SQL = `UPDATE books SET title=$1, author=$2, image_url=$3, description=$4, isbn=$5, bookshelf=$6 WHERE id=$7;`;
  let values = [title, author, image_url, description, isbn, bookshelf, request.params.book_id];

  client.query(SQL, values)
    .then(response.redirect(`/details/${request.params.book_id}`))
    .catch(err => handleError(err, response));
}

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Book Collection: Details</title>
    <%- include('../components/head') %>

  </head>
  <body>
    <main>
      <h4><%- include('../components/nav') %> Book Details </h4>
      <div id=detaildiv>
        <button class="hide">Edit Details</button>
        <form action="<%= `/delete/${book.id}` %>" method="POST" id="delete">
          <input type="hidden" name="_method" value="DELETE"></input>
          <button>Delete Book from Library</button>
        </form>
        <img src= <%= book.image_url %> />
        <div class="toggle details">
          <%- include('../components/basic', {book: book});%>
          <p class='description'><%= book.description %></p>
          <p class='isbn'>ISBN: <%=book.isbn%></p>
          <p class='shelf'>Bookshelf: <%= book.bookshelf%></p>
        </div>
        <form action="<%= `/edit/${book.id}` %>" method="POST" class="toggle hidden">
          <input type="hidden" name="_method" value="PUT"></input>
          <%- include('../components/form', {book: book});%>
          <select name="bookshelf">
            <% bookshelves.forEach(shelf => {%>
            <option value="<%= shelf.bookshelf %>" <%= (shelf.bookshelf === book.bookshelf) ? 'selected="selected"' : '' %>><%= shelf.bookshelf %></option>
            <% }) %>
          </select>
          <button type="submit">Edit Book</button>
        </form>
      </div>
    </main>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src='/js/app.js'></script>
  </body>
</html>